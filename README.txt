在 MC 数据包或资源包中，部分文件（例如函数、CMD 模型数据）不支持内容附加，只能全局覆盖。而梦回盘灵部分 DLC 为了实现更多功能，覆盖了梦回盘灵数据包或资源包中的这些文件，而其中一部分文件在不同的 DLC 中都有覆盖，这必然会导致冲突。比如：一个 DLC 新增的炼丹炉贴图和另一个 DLC 的法宝贴图只能二选一；一个 DLC 的新增交易项和另一 DLC 的物价优惠只能二选一...

设立这个仓库的初衷，是根据日益增加的 DLC 的不同需求，提供冲突最小化的函数标签接口，从而同时满足这些 DLC 的功能需求。欢迎修改完善本框架（直接发布和 Pull Request 申请并入主线皆可），或者直接整合进 DLC 中方便玩家使用。



==== 使用者协议 ====

- 允许且支持 DLC 直接使用仓库中的任何代码。
- 玩家如果发现冲突（比如说一个 DLC 整合了旧版代码，另一个 DLC 整合了新版代码），可以将最新版仓库打包，作为补丁资源包或数据包，加在最顶即可解决冲突，前提是各 DLC 均为最新版。
- 所有人都可以二次发布此仓库（即分支/衍生），但务必保留此协议，若有增删代码，请更新版本号。
- 本仓库中的所有文件仅限《盘灵古域》二创用途。



==== 数据包说明 ====

目前提供以下接口，它们被分为数个模块，可以根据实际需求，将需要的模块抽出来单独使用。但请注意，每个模块中都有相应的依赖文件来驱动这些接口，请务必原封不动的将这些依赖文件一同取出。

NPC（村民）热修改
依赖文件：
- dlc_generic/advancements/
- dlc_generic/functions/advancements/
- dlc_generic/functions/npc_modify/
- dlc_generic/tags/functions/
接口（@s 为 NPC 自身）：
- #dlc_generic:npc_modify/item
- #dlc_generic:npc_modify/list
原理：玩家在点击 NPC 后，打开交易界面前会触发物品栏变更进度事件，令玩家周围 6 格内的 NPC 执行上述接口中注册的函数实现修改，并加上 “modified” 标签（拥有此标签的 NPC 不会再次热更新，避免了不必要的性能开销）
注意：
- 先修改现有交易项（item 接口），之后再增加或删除交易项（list 接口），尽可能避免修改现有交易项时索引值错乱
- 当然部分 DLC 仍通过覆盖函数的方式修改 NPC，所以尽量避免使用固定的索引值对交易项进行修改，或者根据实际情况做针对性适配
- 由于热修改独立于 NPC 生成函数，这意味着目标 NPC 范围不再局限于某一坐标，如需对指定 NPC 进行修改，可在选择器中使用名称、坐标范围等条件
- 后续内容更新仍需使用刷新 NPC 的传统方法。如果考虑到更新需求，请尽量缩小目标 NPC 范围（比如限制坐标范围）以便刷新

金元素怪物减伤率修改（普通 & 精炼 & 浓缩）
依赖文件：
- pld/functions/system/zf/shifang/main/
- dlc_generic/functions/pld_system/zf/shifang/main/damage_remove.json
- dlc_generic/tags/functions/pld_system/zf/shifang/main/damage_remove.mcfunction
固定值阵法抗性接口（代码参考自罪如歌）：怪物添加标签 fk20/fk40/fk60/fk80/fk100
减伤率修改接口（@s 为目标怪物自身）：#dlc_generic:pld_system/zf/shifang/main/damage_remove

如果有更多接口需求，可以二次修改本框架或提出建议，为更多 DLC 提供一个更扎实的基底。



==== 资源包说明 ====

物品模型覆写冲突修复
暂无完美的接口解决方案，只能针对以下 DLC，以合并覆写列表的方式实现修复：
- 罪如歌
- 万通货斋
- 元素·结晶学
- 伏龙芝美化资源包（需添加梦回盘灵原版资源包至其下方）

如需将框架打包为补丁资源包单独加载，请添加到资源包列表最顶，否则相关功能可能失效。



================ 更新日志 ================

v1.0.0 (2025-9-3)
- 正式命名为 “梦回盘灵 DLC 通用接口框架”
- 新增 NPC 热修改接口
- 所有接口统一为 “dlc_generic” 命名空间

v0.2.0-beta (2025-8-14)
- 修复万通货斋与罪如歌的自定义法抗接口冲突

v0.1.0-beta (2025-8-12)
- 修复梦回盘灵与以下 DLC 的物品模型冲突：
  - 罪如歌（参考自 2025.7.16）
  - 万通货斋（参考自 beta.2.9x.177.c）
  - 元素·结晶学（参考自 V1.54.73）
  - 伏龙芝美化资源包 (参考自第2代，具体版本不详)